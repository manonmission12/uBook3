/* -------------------------
   NAVBAR PROFILE DROPDOWN
   ------------------------- */
.profile-menu { position: relative; z-index: 1200; }
.profile-trigger { display: flex; align-items: center; gap: 10px; cursor: pointer; }
.profile-trigger .avatar {
    width: 34px; height: 34px; border-radius: 50%;
    border: 2px solid var(--border); object-fit: cover;
    transition: border-color 0.15s ease;
}
.profile-trigger:hover .avatar { border-color: var(--brand); }

/* Dropdown container */
#profileDropdown,
.dropdown-menu {
    position: absolute; top: 48px; right: 0;
    width: 200px; background: var(--bg-card);
    border: 1px solid var(--border); border-radius: 14px;
    box-shadow: 0 12px 40px rgba(0,0,0,0.1);
    display: none; flex-direction: column;
    overflow: hidden; z-index: 1300;
    padding: 4px;
}

/* Active state */
#profileDropdown.active,
.dropdown-menu.active { display: flex; }

/* Items */
#profileDropdown .dropdown-item,
.dropdown-menu .dropdown-item,
#profileDropdown > button,
.dropdown-menu > button {
    padding: 10px 14px; text-decoration: none;
    color: var(--text-primary); display: flex;
    gap: 10px; align-items: center;
    background: transparent; border: none;
    cursor: pointer; font-size: 0.88rem;
    font-weight: 650; border-radius: 10px;
    transition: background 0.12s ease;
}

/* Hover / focus */
#profileDropdown .dropdown-item:hover,
.dropdown-menu .dropdown-item:hover,
#profileDropdown > button:hover,
.dropdown-menu > button:hover {
    background: var(--bg-input);
}

/* Divider */
.dropdown-divider { height: 1px; background: var(--border); margin: 2px 0; }

/* Staggered entrance */
#profileDropdown.active .dropdown-item:nth-of-type(1),
.dropdown-menu.active .dropdown-item:nth-of-type(1) { animation: dd-fade 160ms ease forwards; }
#profileDropdown.active .dropdown-item:nth-of-type(2),
.dropdown-menu.active .dropdown-item:nth-of-type(2) { animation: dd-fade 200ms ease forwards; }
#profileDropdown.active .dropdown-item:nth-of-type(3),
.dropdown-menu.active .dropdown-item:nth-of-type(3) { animation: dd-fade 240ms ease forwards; }
#profileDropdown.active .dropdown-item:nth-of-type(n+4),
.dropdown-menu.active .dropdown-item:nth-of-type(n+4) { animation: dd-fade 280ms ease forwards; }
#profileDropdown.active .dropdown-divider,
.dropdown-menu.active .dropdown-divider { animation: dd-fade 220ms ease forwards; }

@keyframes dd-fade {
    from { opacity: 0; transform: translateY(-4px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Accessibility: reduced motion */
@media (prefers-reduced-motion: reduce) {
    #profileDropdown .dropdown-item,
    .dropdown-menu .dropdown-item {
        animation: none !important;
    }
}

/* -------------------------
   LAYOUT PROFIL
   ------------------------- */
.profile-container {
    max-width: 1100px; margin: 28px auto;
    padding: 0 5%; display: grid;
    grid-template-columns: 300px 1fr;
    gap: 24px; width: min(1100px, 100%);
    margin-left: auto;
    margin-right: auto;
}

.profile-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 24px; padding: 28px;
    box-shadow: var(--shadow);
    position: relative;
}

/* Avatar */
.avatar-wrapper { position: relative; width: 100px; margin: 0 auto 8px; }
.avatar-large {
    width: 100px; height: 100px; border-radius: 50%;
    background: linear-gradient(135deg, var(--bg-input), var(--bg-card));
    color: var(--text-primary); font-size: 3rem;
    display: flex; align-items: center; justify-content: center;
    overflow: hidden;
    border: 3px solid var(--bg-card);
    box-shadow: 0 0 0 2px var(--brand), 0 8px 24px rgba(0,0,0,0.08);
}
.avatar-large img { width: 100%; height: 100%; object-fit: cover; }

/* Edit photo button */
.btn-edit-photo {
    position: absolute; bottom: 2px; right: -2px;
    width: 32px; height: 32px;
    background: linear-gradient(135deg, #2563eb, #3b82f6);
    color: white; border: 3px solid var(--bg-card);
    border-radius: 50%; cursor: pointer;
    display:flex; align-items:center; justify-content:center;
    font-size: 0.85rem;
    transition: all 0.15s ease;
    box-shadow: 0 4px 12px rgba(37,99,235,0.2);
}
.btn-edit-photo:hover { transform: scale(1.1); }
.photo-hint {
    display: block; text-align: center;
    font-size: 0.73rem; color: var(--text-tertiary);
    margin-top: 8px; margin-bottom: 14px;
    font-weight: 600;
}

/* FIX: hint jangan overlap avatar */
.photo-hint{
	display:block;
	text-align:center;
	line-height:1.35;
	margin-top: 8px;
	margin-bottom: 16px;
}

/* Header text */
.profile-header h1 {
    font-size: 1.4rem; font-weight: 900;
    letter-spacing: -0.3px;
}
.user-role {
    color: #10b981;
    font-weight: 700;
}
.join-date { color: var(--text-tertiary); font-size: 0.85rem; font-weight: 600; }

/* Stats */
.profile-stats {
    display: grid; grid-template-columns: repeat(2, 1fr);
    gap: 10px; margin: 16px 0 20px;
}
.stat-item {
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: 14px; padding: 14px 12px;
    text-align: center;
}
.stat-item h3 { color: var(--text-primary); font-weight: 900; font-size: 1.3rem; margin: 0; }
.stat-item span { color: var(--text-tertiary); font-size: 0.78rem; font-weight: 700; }

/* Logout buttons */
.btn-logout {
    width: 100%; padding: 11px 14px;
    background: transparent; color: #ef4444;
    border: 1px solid #fecaca; border-radius: 12px;
    font-weight: 700; cursor: pointer;
    display: flex; align-items: center;
    justify-content: center; gap: 8px;
    font-size: 0.88rem;
    transition: all 0.15s ease;
}
.btn-logout:hover {
    background: #ef4444; color: white;
    border-color: #ef4444;
    transform: translateY(-1px);
}

/* Right content */
.profile-content-right { display: flex; flex-direction: column; gap: 24px; }
.user-uploads-section {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 22px; padding: 24px;
    box-shadow: var(--shadow);
}
.user-uploads-section h2 {
    font-size: 1.1rem; margin-bottom: 16px;
    color: var(--text-primary);
    display: flex; align-items: center; gap: 10px;
    font-weight: 800;
}
.user-uploads-section h2::after {
    display: none;
}

/* Mini grid */
.book-grid-mini {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 14px;
}
.mini-book-card {
    background: var(--bg-card); border-radius: 14px;
    overflow: hidden; border: 1px solid var(--border);
    transition: all 0.18s ease; cursor: pointer;
}
.mini-book-card:hover {
    transform: translateY(-3px);
    border-color: var(--brand);
    box-shadow: 0 8px 24px rgba(5,150,105,0.1);
}
.mini-book-card img {
    width: 100%; height: 170px; object-fit: cover;
    border-bottom: 1px solid var(--border);
}
.mini-info { padding: 10px 12px; }
.mini-info h4 {
    font-size: 0.88rem; margin: 0;
    color: var(--text-primary); font-weight: 800;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.mini-info p { font-size: 0.73rem; color: var(--text-tertiary); margin: 4px 0 0; }

/* Empty message */
.empty-msg {
    color: var(--text-tertiary); font-style: italic;
    text-align: center; padding: 20px;
    border: 1px dashed var(--border); border-radius: 12px;
    grid-column: 1 / -1;
    font-size: 0.88rem; font-weight: 600;
}

/* Responsive */
@media (max-width: 980px) {
    .profile-container { gap: 20px; }
}
@media (max-width: 850px) {
    .profile-container {
        grid-template-columns: 1fr;
    }
    .profile-card { margin-bottom: 8px; }
    .user-uploads-section { padding: 22px; }
}
@media (max-width: 480px) {
    .avatar-large { width: 88px; height: 88px; }
    .mini-book-card img { height: 150px; }
    .profile-stats { grid-template-columns: 1fr 1fr; }
}

/* FIX: dropdown jangan ketutup */
.navbar { overflow: visible; }

/* NEW: tombol Beranda versi profile.html diposisikan di kanan */
.nav-link-home { padding: 8px 14px; border-radius: 10px; white-space: nowrap; }

.nav-container { overflow: visible; }